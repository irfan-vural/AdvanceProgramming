<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>CW5 Event Listener </title>

  <style>
    /* CSS comment */
    body {
      max-width: 440px;
    }

    #url {
      width: 190px;
    }

    span,
    #url {
      color: blue;
    }
  </style>
</head>

<body>
  <!-- HTML comment: Modify all items marked xxx -->

  <h2 id=title title="Put your name here"> Ä°rfan VURAL</h2>
  <br>
  <h2>Battery Status</h2>
  <p> <span id=batstatus></span></p>
  <p title="Battery level (integer)">
    Battery level: <span id=lev></span>
  </p>

  <h2>Online Status</h2>
  <p> <span id=onlinestatus></span></p>
  
  <h2>Keyboard</h2>
  <p> <span id=keyboardresult></span></p>

  <hr />
  <b>Sample code</b>
  <pre id=sample>This text is not shown. Why? because we change the innertext later</pre>

  <hr />

  <script>
    "use strict";
    function initialize() {
      //battery level
      //initialize first values
      navigator.getBattery().then(
        b => lev.innerText = ('% ' + b.level * 100)
      ) 
      navigator.getBattery().then(
        b => (batstatus.innerText = b.charging ? 'Charging...':'Discharging...')
      )
      //onchange
      navigator.getBattery().then(e => 
      e.onchargingchange = b =>
      (batstatus.innerText = e.charging ?'Charging':'Discharging'))
      .then(e => e.onlevelchange = b =>
      (lev.innerText =batteryLevel=e.level*100))
      
      //Online Status
      //initialize first values
      onlinestatus.innerText=
      window.navigator.onLine?"Connected -- online":"Disconnected --offline"
      //onchange
      window.onoffline = e=>  onlinestatus.innerText="Disconnected --offline"
      window.ononline = e=>  onlinestatus.innerText="Connected -- online"

      //Keyboard
      window.onkeyup = e =>(keyboardresult.innerText=("You pressed :"+e.key))

    }
    
    title.innerText = document.title;
    sample.innerText = initialize + '\n';
    initialize();

  </script>

</body>

</html>